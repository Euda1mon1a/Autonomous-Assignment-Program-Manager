# =============================================================================
# Static File Caching Configuration
# =============================================================================
# Aggressive caching configuration for static assets to improve performance.
# Used for immutable assets like JS bundles, CSS, images, and fonts.
# =============================================================================

# -----------------------------------------------------------------------------
# Cache-Control Headers
# -----------------------------------------------------------------------------
# Cache static assets for 1 year (assets should use cache-busting URLs)
add_header Cache-Control "public, max-age=31536000, immutable" always;

# Remove security headers that conflict with caching
# These are re-added for dynamic content in security-headers.conf
proxy_hide_header Cache-Control;

# -----------------------------------------------------------------------------
# Gzip Configuration
# -----------------------------------------------------------------------------
# Enable gzip for static assets
gzip_static on;

# -----------------------------------------------------------------------------
# File Handling
# -----------------------------------------------------------------------------
# Enable sendfile for efficient file serving
sendfile on;
tcp_nopush on;
tcp_nodelay on;

# -----------------------------------------------------------------------------
# ETag and Last-Modified
# -----------------------------------------------------------------------------
# Enable ETag for cache validation
etag on;

# Enable Last-Modified header
if_modified_since before;

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Reduce logging for static assets
access_log off;

# -----------------------------------------------------------------------------
# Error Handling
# -----------------------------------------------------------------------------
# Custom 404 handling for missing static files
# Falls back to the frontend application
# try_files $uri @frontend;
