# Application
APP_NAME=Residency Scheduler
APP_VERSION=1.0.0
DEBUG=false

# Database
DATABASE_URL=postgresql://scheduler:scheduler@localhost:5432/residency_scheduler

# Database Connection Pool (see ARCHITECTURE.md for sizing guidelines)
# DB_POOL_SIZE=10          # Base pool size (default: 10)
# DB_POOL_MAX_OVERFLOW=20  # Additional connections allowed (default: 20)
# DB_POOL_TIMEOUT=30       # Seconds to wait for connection (default: 30)
# DB_POOL_RECYCLE=1800     # Recycle connections after N seconds (default: 1800)
# DB_POOL_PRE_PING=true    # Verify connections before use (default: true)

# Redis / Celery (required for resilience framework background tasks)
# REDIS_PASSWORD is required for authentication (use strong random value in production)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
REDIS_PASSWORD=your_redis_password_here
REDIS_URL=redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0
# Note: If REDIS_PASSWORD is set, it will be automatically added to URLs by the application

# Security
SECRET_KEY=your-secret-key-change-in-production
WEBHOOK_SECRET=your-webhook-secret-change-in-production

# Token Configuration
# ACCESS_TOKEN_EXPIRE_MINUTES=15  # 15 minutes (default)
# REFRESH_TOKEN_EXPIRE_DAYS=7     # 7 days (default)
# REFRESH_TOKEN_ROTATE=true         # Issue new refresh token on each use (default: true)
#                                   # When enabled, old refresh tokens are blacklisted
#                                   # to prevent reuse after rotation (security best practice)

# CORS (Cross-Origin Resource Sharing)
# Restrict to explicit origins in production - NEVER use "*" wildcard
# For development: CORS_ORIGINS=["http://localhost:3000","http://localhost:3001"]
# For production: CORS_ORIGINS=["https://scheduler.hospital.org","https://scheduler-staging.hospital.org"]
CORS_ORIGINS=["http://localhost:3000"]

# Optional: Use regex pattern for flexible domain matching
# Example: Allow all subdomains of hospital.org in production
# CORS_ORIGINS_REGEX=^https://.*\.hospital\.org$
# Security: Regex patterns should be as specific as possible
# CORS_ORIGINS_REGEX=

# Trusted Proxies (for X-Forwarded-For header validation)
# Only trust X-Forwarded-For from these IPs to prevent rate limit bypass
# Empty list uses direct client IP (safest default for non-proxied setups)
# TRUSTED_PROXIES=["10.0.0.1", "172.16.0.0/12"]  # Example: internal load balancer IPs

# Resilience Framework Configuration
# Utilization thresholds based on queuing theory - adjust for your program's needs
# See docs/RESILIENCE_FRAMEWORK.md and docs/runbooks/resilience-alerts.md
# RESILIENCE_WARNING_THRESHOLD=0.70     # Yellow level (default: 70%)
# RESILIENCE_MAX_UTILIZATION=0.80       # Orange level (default: 80%)
# RESILIENCE_CRITICAL_THRESHOLD=0.90    # Red level (default: 90%)
# RESILIENCE_EMERGENCY_THRESHOLD=0.95   # Black level (default: 95%)

# Auto-activation settings
# RESILIENCE_AUTO_ACTIVATE_DEFENSE=true  # Auto defense level transitions
# RESILIENCE_AUTO_ACTIVATE_FALLBACK=false # Require manual fallback activation
# RESILIENCE_AUTO_SHED_LOAD=true          # Auto load shedding

# Monitoring intervals
# RESILIENCE_HEALTH_CHECK_INTERVAL_MINUTES=15    # Health check frequency
# RESILIENCE_CONTINGENCY_ANALYSIS_INTERVAL_HOURS=24  # N-1/N-2 analysis frequency

# Alert settings (configure for production)
# RESILIENCE_ALERT_RECIPIENTS=["admin@hospital.org"]  # Email recipients
# RESILIENCE_SLACK_CHANNEL=#resilience-alerts         # Slack channel

# ML Model Configuration
# Enable ML-based schedule scoring and predictions
# ML_ENABLED=false  # Enable ML features (requires trained models)
# ML_MODELS_DIR=models  # Base directory for ML model artifacts
# ML_PREFERENCE_MODEL_PATH=  # Path to preference predictor model
# ML_CONFLICT_MODEL_PATH=  # Path to conflict predictor model
# ML_WORKLOAD_MODEL_PATH=  # Path to workload optimizer model

# ML Training Configuration
# ML_TRAINING_LOOKBACK_DAYS=365  # Historical data range for training
# ML_MIN_TRAINING_SAMPLES=100  # Minimum samples required for training
# ML_AUTO_TRAINING_ENABLED=false  # Enable automatic model retraining
# ML_TRAINING_FREQUENCY_DAYS=7  # Retraining frequency in days

# ML Scoring Weights (for ScheduleScorer - must sum to 1.0)
# ML_PREFERENCE_WEIGHT=0.4  # Weight for preference satisfaction
# ML_WORKLOAD_WEIGHT=0.3  # Weight for workload balance
# ML_CONFLICT_WEIGHT=0.3  # Weight for conflict safety

# ML Thresholds
# ML_TARGET_UTILIZATION=0.80  # Target utilization (aligned with resilience)
# ML_OVERLOAD_THRESHOLD=0.85  # Threshold for overloaded detection
# ML_CONFLICT_RISK_THRESHOLD=0.70  # High-risk conflict threshold
